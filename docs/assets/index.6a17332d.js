const u=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}};u();let s;const d=document.querySelector("#main-form"),a=d.querySelector("input[type=file]");a.addEventListener("change",function(c){const n=c.target.files;if(n&&n.length>0){const r=new FileReader;r.onloadend=function(i){var o,l;const e=(o=i.target)==null?void 0:o.result;s=e;const t=document.createElement("img");t.setAttribute("src",String(e)),t.width=200,t.height=200,(l=document.getElementById("imgpreview"))==null||l.appendChild(t)},r.readAsDataURL(n[0])}});d.addEventListener("submit",async function(c){c.preventDefault(),fetch("https://blob-detectionapp.herokuapp.com/detect/",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:s})}).then(n=>n.json()).then(n=>{if(!n.success){alert("Failed to detect! try again");return}let{result:r,jumlah_blob:i}=n;r=r.slice(2).replace("'",""),fetch(`data:image/jpg;base64,${r}`).then(e=>e.blob()).then(e=>{var o;const t=document.createElement("img");t.setAttribute("src",URL.createObjectURL(e)),t.width=200,t.height=200,(o=document.getElementById("imgresult"))==null||o.appendChild(t),document.getElementById("blob-count").textContent=`blob count: ${i}`}).catch(e=>{console.log(e)})}).catch(n=>{console.log(n)})});
